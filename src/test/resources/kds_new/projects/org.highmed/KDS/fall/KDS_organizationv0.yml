engine: FHIRConnect/v0.0.1
type: extension
metadata:
  name: KDS_organization
  version: 0.0.1-alpha
spec:
  system: FHIR
  version: R4
  extends: CLUSTER.organization.v0 # deprecated

mappings:

  - name: "orgaKey" #is populated from the institution mapping
    extension: "overwrite"
    with:
      fhir: "$fhirRoot.serviceType"
      openehr: "$archetype/items[at0024]" #is mapped from fachabteilungsschl√ºssel
    fhirCondition:
      targetRoot: "$fhirRoot.serviceType"
      targetAttribute: "coding.system"
      operator: "one of"
      criteria: "[http://fhir.de/CodeSystem/dkgev/Fachabteilungsschluessel]"
    followedBy:
      mappings:
        - name: "fachabteilungsschluessel"
          with:
            fhir: "coding" # goes on element back to extension
            openehr: "$reference"
          manual:
            - name: "system"
              fhir:
                - path: "system"
                  value: "http://fhir.de/CodeSystem/dkgev/Fachabteilungsschluessel"

